---
import { getCollection } from 'astro:content';

const { tagName } = Astro.props;

const posts = await getCollection('posts', ({ data }) => {
  return data.tags.includes(tagName);
});

const sortedPosts = posts.sort((a, b) => a.data.title.localeCompare(b.data.title));

---

<ul>
  {sortedPosts.map(post =>
  <li><a href=`/posts/${post.slug}/`>{post.data.title}</a></li>
  )}
</ul>