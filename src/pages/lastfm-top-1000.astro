---
// COMPONENTS

import Layout from '../layouts/Layout.astro';
import Klub from '../components/Klub.astro';
import FormattedDate from '../components/FormattedDate.astro';
import lastFmData from '../data/lastfm.json';

// METADATA VARIABLES

let title = 'My Last.fm Top 1000 Artists';
let description = 'This page lists my top 1000 artists on Last.fm, ordered by play count.';

---
<Layout title={title} description={description}>
        <h1>{title}</h1>
        <p>This page lists my top 1000 artists on Last.fm by play count. <a href="/posts/how-i-display-my-last-fm-top-1000-artists/">Read my blog post</a> for more info on how I turned the data into a page.</p>

        <details>
          <summary>Bonus content!</summary>
          <br>
          <p>I liked the idea of grouping artists by 100s of playcounts so here are the "Klubs", from 100â€“1,000:</p>
          <Klub />
        </details>

        <p>Last updated: <FormattedDate date={new Date()}/></p>
      <table>
              <thead>
                <tr>
                  <th>Pos.</th>
                  <th>Artist</th>
                  <th>Playcount</th>
                </tr>
              </thead>
              {lastFmData.topartists.artist.map((item: any) => (
              <tr>
                  <td>{item['@attr'].rank}</td>
                  <td><a href={item.url}>{item.name}</a></td>
                  <td>{item.playcount.toLocaleString()}</td>
                </tr>
              ))}
            </table>
</Layout>